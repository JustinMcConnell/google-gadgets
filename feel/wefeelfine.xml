<?xml version="1.0" encoding="UTF-8" ?>
<Module>
<ModulePrefs
  title               = "__UP_title__"
  directory_title     = "We Feel Fine Murmurs"
  title_url           = "http://www.wefeelfine.org/"
  description         = "We Feel Fine is an exploration of human emotion on a global scale by Jonathan Harris and Sep Kamvar.  Since August 2005, We Feel Fine has been harvesting human feelings from a large number of weblogs. Every few minutes, the system searches the world's newly posted blog entries for occurrences of the phrases 'I feel' and 'I am feeling'."
  author              = "Justin McConnell"
  author_email        = "boolean+gmodules@gmail.com"
  author_location     = "San Francisco, CA"
  author_affiliation  = "http://www.talisweb.com/justin/"
  author_link         = "http://www.talisweb.com/justin/"
  author_photo        = "http://www.google.com/ig/modules/ov/developer_justin.jpg"
  author_aboutme      = "I work in San Francisco.  I write software.  I take photographs.  I enjoy running many miles at a time."
  author_quote        = "'Great spirits have always encountered violent opposition from mediocre minds.' -- Albert Einstein"
  screenshot          = "http://boolean.googlepages.com/wefeelfine_screenshot.png"
  thumbnail           = "http://boolean.googlepages.com/wefeelfine_thumbnail.png"
  scaling             = "true"
  scrolling           = "true"
  singleton           = "true" 
  height              = "300">

  <Require feature="analytics" />
</ModulePrefs>

<UserPref name="title" display_name="Title" default_value="We Feel Fine Murmurs" />
<UserPref name="speed" display_name="Speed" default_value="45" datatype="enum">
  <EnumValue value="100" display_value="Slow"/>
  <EnumValue value="45" display_value="Medium"/>
  <EnumValue value="15" display_value="Fast"/>
</UserPref>

<Content type="html">
<![CDATA[

<style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-weight:inherit;font-style:inherit;font-size:100%;font-family:inherit;vertical-align:baseline;}:focus{outline:0;}body{line-height:1;color:black;background:white;}ol,ul{list-style:none;}table{border-collapse:separate;border-spacing:0;}caption,th,td{text-align:left;font-weight:normal;}blockquote:before,blockquote:after,q:before,q:after{content:"";}blockquote,q{quotes:"" "";}body{font-size:72.5%;font-family:Tahoma,Helvetica,Verdana,sans-serif;color:#FFF;background:#191919;}a,a:link{color:#FFF;text-decoration:none;}a:visited{color:#FFF;}a:hover{color:#F42764;}a:active{color:#FF2764;}a:focus{outline:1px dotted invert;}a:hover .icon{background:#F42764;}#data{margin:5px 0 0 0;}#list{list-style-type:none;margin:0;padding:0;display:block;}#list li{margin-left:10px;clear:both;}#status{color:#F02662;padding:12px 0 12px 2em;display:none;}#controls{height:2em;line-height:2em;padding:0;margin:0;background:#451C28;color:#FFF;}#controls a{line-height:2em;outline:none;}#playpause{outline:none;float:left;padding:0 0 0 3px;}#linkback{float:right;padding:0 3px 0 0;}.icon{background:#FFF;width:20px;height:20px;border:0;margin:0;padding:0;vertical-align:middle;margin-top:0;}.feeling{float:right;padding-bottom:15px;padding-right:10px;width:89%;}.text{font-size:1.15em;line-height:1.45em;}.meta{color:#808080;font-size:.95em;visibility:hidden;margin-top:5px;line-height:1.25em;}.dot{float:left;width:6%;height:8px;margin-top:.5em;}.highlightedFeeling{padding-bottom:1px;border-bottom-style:dotted;border-bottom-width:1px;}
</style>

<!--[if IE]>
<script type="text/javascript">
  document.write("<scr" + "ipt type='text/javascript' src='" + _IG_GetCachedUrl("http://boolean.googlepages.com/excanvas-compressed.js") + "'></scr" + "ipt>");
</script>
<![endif]-->

<script type="text/javascript">
  document.write("<scr" + "ipt type='text/javascript' src='" + _IG_GetCachedUrl("http://boolean.googlepages.com/cyc.js") + "'></scr" + "ipt>");
</script>

<script type="text/javascript">
var feelings=[];var prefs=new _IG_Prefs();var current=0;var paused=false;var writing=false;var options={data:{display:"xml",returnfields:"feeling,sentence,posttime,postdate,posturl,gender,born,country,state,city,lat,lon,conditions",feeling:"",gender:-1,agerange:"",conditions:"",country:"",state:"",city:"",postyear:"",postmonth:"",postdate:"",limit:200},getUrl:function(){var a="http://api.wefeelfine.org:8080/ShowFeelings?encode=1&"+(this.data.display?"&display="+this.data.display:"")+(this.data.returnfields?"&returnfields="+this.data.returnfields:"")+(this.data.feeling?"&feeling="+this.data.feeling:"")+(this.data.gender>=0?"&gender="+this.data.gender:"")+(this.data.agerange?"&agerange="+this.data.agerange:"")+(this.data.conditions?"&conditions="+this.data.conditions:"")+(this.data.country?"&country="+this.data.country:"")+(this.data.state?"&state="+this.data.state:"")+(this.data.city?"&city="+this.data.city:"")+(this.data.limit?"&limit="+this.data.limit:"");if(this.data.postdate){a+="&postdate="+this.data.postyear+"-"+datePad(this.data.postmonth+1)+"-"+datePad(this.data.postdate)}else{if(this.data.postyear){a+="&postyear="+this.data.postyear}if(this.data.postmonth||(typeof this.data.postmonth=="number"&&this.data.postmonth===0)){a+="&postmonth="+datePad(this.data.postmonth+1)}}return a},getDesc:function(){var a=arguments[0]||"";var b=arguments[1]||"";var c="";c+=a+" from ";if(this.data.gender>=0){c+=genders[this.data.gender].toLowerCase()+"s "}else{c+="people "}if(this.data.agerange){c+="aged "+this.data.agerange+" "}if(this.data.feeling){c+="who feel "+this.data.feeling+" "}if(this.data.postdate){c+="on "+monthNamesShort[this.data.postmonth]+" "+this.data.postdate+", "+this.data.postyear+" "}else{if((this.data.postmonth||(this.data.postmonth===0&&this.data.postmonth!==""))&&this.data.postyear){c+="in "+monthNamesShort[this.data.postmonth]+" "+this.data.postyear+" "}else if(this.data.postyear){c+="in "+this.data.postyear+" "}}if(this.data.conditions){c+="when its "+conditions[this.data.conditions].toLowerCase()+" "}if(this.data.city||this.data.state||this.data.country){c+="in "}if(this.data.city){c+=this.data.city+" "}if(this.data.state){c+=this.data.state+" "}if(this.data.country){c+=this.data.country+" "}c+=b;return c}};window.onload=function(){loadAllImages();loadFeelings();_IG_Analytics("UA-51692-4","/wefeelfine")};function loadOneImage(a,b){var c=_gel(a);if(c){var d=c.getElementsByTagName("img")[0];if(d){d.src=_IG_GetCachedUrl(b)}}}function preLoadOneImage(a){(document.createElement("img")).src=_IG_GetCachedUrl(a)}function loadAllImages(){loadOneImage("playpause","http://boolean.googlepages.com/wefeelfine_pause.gif");loadOneImage("linkback","http://boolean.googlepages.com/wefeelfine_arrow.gif");preLoadOneImage("http://boolean.googlepages.com/wefeelfine_play.gif")}function loadFeelings(){current=0;_gel("list").innerHTML="";setStatus("");var a=_IG_Callback(xmlToJson,function(){setTimeout(function(){playPause("play")},1000);nextFeeling()});_IG_FetchXmlContent(options.getUrl(),a)}function xmlToJson(a){feelings=[];var b=a;if(b===null||typeof(b)!="object"||b.firstChild===null){setStatus("Couldn't talk to the server.  Try reloading in a bit. ");return}var c;var d;if(b.firstChild&&b.firstChild.nodeName=="feelings"){d=b.firstChild.childNodes}else if(b.childNodes[2]&&b.childNodes[2].nodeName=="feelings"){d=b.childNodes[2].childNodes}else if(b.childNodes[1]&&b.childNodes[1].nodeName=="feelings"){d=b.childNodes[1].childNodes}for(var i=0;i<d.length;i++){if(d[i].nodeType!=1){continue}c={};for(var j=0;j<d[i].attributes.length;j++){c[d[i].attributes[j].nodeName]=d[i].attributes[j].nodeValue}feelings.push(c)}checkFeelings();if(arguments[1]&&typeof arguments[1]=="function"){arguments[1]()}}function checkFeelings(){if(feelings.length===0){setStatus("No feelings found")}}function playPause(){var b=arguments[0]&&arguments[0].toLowerCase()=="pause"?true:false;var c=arguments[0]&&arguments[0].toLowerCase()=="play"?true:false;var d=b||!paused;var e=c||paused;var f=function(){paused=false;var a=_gel("playpause");a.title="Pause";a.innerHTML='<img class="icon" alt="Pause" width="20" height="20">Pause';loadOneImage("playpause","http://boolean.googlepages.com/wefeelfine_pause.gif");if(!writing){nextFeeling()}};var g=function(){paused=true;var a=_gel("playpause");a.title="Play";a.innerHTML='<img class="icon" alt="Play" width="20" height="20">Play';loadOneImage("playpause","http://boolean.googlepages.com/wefeelfine_play.gif")};var h;if(b&&paused){h=function(){}}else if(b&&!paused){h=g}else if(c&&paused){h=f}else if(c&&!paused){h=function(){}}else if(paused){h=f}else if(!paused){h=g}h()}function setStatus(a){var b=_gel("status");if(a){b.innerHTML=a;b.style.display="block"}else{b.innerHTML="";b.style.display="none"}}function getBlog(a){if(/livejournal\.com/.test(a)){return"LiveJournal"}else if(/blogspot\.com/.test(a)){return"Blogger"}return"some random blog"}function nextFeeling(){if(current+1<=feelings.length){addFeeling(current);current++;return true}setStatus("No more feelings "+options.getDesc());return false}function drawCircle(a,b,c){if(a.getContext){var d=a.getContext("2d");d.clearRect(0,0,8,8);d.beginPath();d.arc(4,4,b,0,Math.PI*2,false);d.fillStyle=c;d.fill()}}function addFeeling(a){var b=feelings[a];var c=b.sentence;var d="#FFFFFF";if(b.feeling){if(typeof cyc!=="undefined"&&cyc[b.feeling]){d="#"+cyc[b.feeling].c}var e="border-bottom-color:"+d;var f=new RegExp("("+b.feeling+")","gi");c=c.replace(f,"<span class='highlightedFeeling' style='"+e+"'>$1</span>")}var g=_gel("list");var h=document.createElement("li");h.id="item"+a;h.className="item";var i=document.createElement("a");i.target="_blank";i.href=b.posturl;i.id="text"+a;i.className="text";i.title="Read entire feeling on "+getBlog(b.posturl);i.innerHTML="&nbsp;";i.onmouseover=function(){this.style.color="#CE2457"};i.onmouseout=function(){this.style.color=""};var j=document.createElement("div");j.id="meta"+a;j.className="meta";j.innerHTML="&nbsp;";var k=document.createElement("div");k.className="feeling";k.id="feeling"+a;k.appendChild(i);k.appendChild(j);var l=document.createElement("canvas");l.id="canvas"+a;l.height=8;l.width=8;var m=document.createElement("div");m.id="canvasDiv"+a;m.className="dot";m.appendChild(l);h.appendChild(m);if(typeof G_vmlCanvasManager!="undefined"){G_vmlCanvasManager.initElement(l);l=h.getElementsByTagName("canvas")[0]}h.onmouseover=function(){drawCircle(l,3,d)};h.onmouseout=function(){drawCircle(l,2,d)};drawCircle(l,2,d);h.appendChild(k);g.appendChild(h);g.insertBefore(h,g.firstChild);writing=true;writeText(i,c,0,function(){j.innerHTML=getMetaInfo(a);setOpacity(j,0);j.style.visibility="visible";fadeIn(j,function(){writing=false;if(!paused){nextFeeling()}})})}function setOpacity(a,o){if(!a||o<0||o>1){return}if(typeof a.style.filter!=="undefined"){a.style.filter="alpha(opacity="+Math.round(o*100)+")"}else{a.style.opacity=o}}function fadeIn(a,b){var o=0;function f(){setOpacity(a,o);o+=.1;if(o<1.0){setTimeout(f,40)}else if(typeof b==="function"){b()}}f()}function writeText(a,b,c,d){if(c<=b.length){var e=c;var f=c;var g=b.substring(e,f+1).indexOf("<");if(g!=-1){f=c+b.substring(e).indexOf(">")+2}a.innerHTML=b.substring(0,f);var h=function(){writeText(a,b,f+1,d)};setTimeout(h,prefs.getInt("speed"))}else if(c>b.length){if(d){setTimeout(function(){d()},50)}}}function getMetaInfo(a){var b="";var c=feelings[a];var d=new Date();var e=new Date(c.posttime*1000);b+=formatTime(d-e);b+=" / from ";b+=c.born?"a "+(d.getFullYear()-c.born)+" year old ":"someone ";b+=c.gender?genders[c.gender].toLowerCase()+" ":"";b+=c.city||c.state||c.country?"in ":"";b+=c.city?c.city+" ":"";b+=c.state?c.state+" ":"";b+=c.country?c.country+" ":"";b+=c.conditions?"when it was "+conditions[c.conditions].toLowerCase():"";return b}function formatTime(a){a=a/1000;if(a<60){return"<1 min ago"}else if(a<60*2){return Math.floor(a/60)+" min ago"}else if(a<60*60){return Math.floor(a/60)+" mins ago"}else if(a<60*60*2){return Math.floor(a/60/60)+" hour ago"}else if(a<60*60*24){return Math.floor(a/60/60)+" hours ago"}else if(a<60*60*24*2){return Math.floor(a/60/60/24)+" day ago"}else if(a>=60*60*24*2){return Math.floor(a/60/60/24)+" days ago"}else{return Math.floor(a)+" seconds ago"}}function datePad(a){if(a>0&&a<10){return"0"+a}return a}
</script>

<div id="controls"><a id="playpause" href="#" onclick="playPause.call(window); return false;" title="Pause"><img class="icon" alt="Pause" width="20" height="20">Pause</a><a id="linkback" href="http://www.wefeelfine.org/mission.html" target="_blank" title="Data by We Feel Fine">We Feel Fine<img class="icon" alt="" width="20" height="20"></a></div><div id="data"><div id="status"></div><ul id="list"></ul></div>

]]>
</Content>
</Module>
